(function(f,r){typeof exports=="object"&&typeof module!="undefined"?r(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],r):(f=typeof globalThis!="undefined"?globalThis:f||self,r(f["vuejs-confirm-dialog"]={},f.Vue))})(this,function(f,r){"use strict";const d=r.reactive([]),D=function(){return{DialogsStore:d,addDialog:function(i){d.push(r.markRaw(i))},removeDialog:function(i){const t=d.findIndex(l=>l.id==i);d.splice(t,1)},removeAll:function(){d.splice(0)}}};function p(){const e=[],o=t=>{const l=e.indexOf(t);l!==-1&&e.splice(l,1)};return{on:t=>(e.push(t),{off:()=>o(t)}),off:o,trigger:t=>{e.forEach(l=>l(t))}}}const u=typeof window!="undefined",$=()=>{};u&&window.document,u&&window.navigator,u&&window.location;const g=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},m="__vueuse_ssr_handlers__";g[m]=g[m]||{},g[m];function I(e=r.ref(!1)){const o=p(),n=p(),i=p();let t=$;const l=c=>(i.trigger(c),e.value=!0,new Promise(w=>{t=w})),a=c=>{e.value=!1,o.trigger(c),t({data:c,isCanceled:!1})},v=c=>{e.value=!1,n.trigger(c),t({data:c,isCanceled:!0})};return{isRevealed:r.computed(()=>e.value),reveal:l,confirm:a,cancel:v,onReveal:i.on,onConfirm:o.on,onCancel:n.on}}var y,C;u&&(window==null?void 0:window.navigator)&&((y=window==null?void 0:window.navigator)==null?void 0:y.platform)&&/iP(ad|hone|od)/.test((C=window==null?void 0:window.navigator)==null?void 0:C.platform);var R=Object.defineProperty,b=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,O=(e,o,n)=>o in e?R(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,A=(e,o)=>{for(var n in o||(o={}))S.call(o,n)&&O(e,n,o[n]);if(b)for(var n of b(o))x.call(o,n)&&O(e,n,o[n]);return e};A({text:""},{top:0,left:0,bottom:0,right:0,height:0,width:0});let E=0;function j(){return++E}function T(e,o={},n={chore:!1,keepInitial:!1}){const i=s=>{if(!s){t.value={};return}for(const P in s)t.value[P]=s[P]},t=r.ref({});i(o);const l=r.ref(!1),a=()=>{l.value=!1,c(h)},{addDialog:v,removeDialog:c,removeAll:w,DialogsStore:M}=D(),{reveal:V,isRevealed:_,onConfirm:q,onReveal:F,onCancel:G,confirm:K,cancel:N}=I(),h=j();return F(s=>{l.value=!0,s&&i(s),v({id:h,dialog:e,isRevealed:_,confirm:K,cancel:N,props:t.value,close:a,revealed:l})}),r.watch(_,s=>{s||(n.chore&&i(n.keepInitial?o:null),c(h))}),{close:a,closeAll:()=>{M.forEach(s=>{s.revealed.value=!1}),w()},reveal:V,isRevealed:r.computed(()=>_.value&&l.value),onConfirm:q,onCancel:G}}var W=(e,o)=>{const n=e.__vccOpts||e;for(const[i,t]of o)n[i]=t;return n};const B=r.defineComponent({name:"DialogsWrapper",setup(){const{DialogsStore:e}=D();return{DialogsStore:e}}});function H(e,o,n,i,t,l){return r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(e.DialogsStore,a=>(r.openBlock(),r.createBlock(r.resolveDynamicComponent(a.dialog),r.mergeProps(a.props,{onConfirm:a.confirm,onCancel:a.cancel,key:a.id}),null,16,["onConfirm","onCancel"]))),128)}var k=W(B,[["render",H]]);function L(e){e.component("DialogsWrapper",k)}f.DialogsWrapper=k,f.createConfirmDialog=T,f.install=L,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
